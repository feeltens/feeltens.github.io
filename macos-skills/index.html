<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">





  <meta name="google-site-verification" content="UUBqmoUZfXKNmLGnzRai90kBNl6HvlYSlYnC-DQY908">












  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=7.2.0">








<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.2.0',
    sidebar: {"position":"right","display":"always","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: true,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="安装任何来源软件1sudo spctl --master-disable 修改文件夹权限创建带权限的文件目录1sudo mkdir -pm 775 /opt/fastdfs 修改文件目录的持有者（推荐使用）1sudo chown -R $USER /opt/fastdfs 修改已存在的文件目录权限1sudo chmod -R 777 /opt/fastdfs 调整菜单栏图标位置按住 Command">
<meta name="keywords" content="macOS">
<meta property="og:type" content="article">
<meta property="og:title" content="macOS skills">
<meta property="og:url" content="http://www.feeltens.com/macos-skills/index.html">
<meta property="og:site_name" content="feeltens">
<meta property="og:description" content="安装任何来源软件1sudo spctl --master-disable 修改文件夹权限创建带权限的文件目录1sudo mkdir -pm 775 /opt/fastdfs 修改文件目录的持有者（推荐使用）1sudo chown -R $USER /opt/fastdfs 修改已存在的文件目录权限1sudo chmod -R 777 /opt/fastdfs 调整菜单栏图标位置按住 Command">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-11-20T13:31:11.164Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="macOS skills">
<meta name="twitter:description" content="安装任何来源软件1sudo spctl --master-disable 修改文件夹权限创建带权限的文件目录1sudo mkdir -pm 775 /opt/fastdfs 修改文件目录的持有者（推荐使用）1sudo chown -R $USER /opt/fastdfs 修改已存在的文件目录权限1sudo chmod -R 777 /opt/fastdfs 调整菜单栏图标位置按住 Command">



  <link rel="alternate" href="/atom.xml" title="feeltens" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://www.feeltens.com/macos-skills/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>macOS skills | feeltens</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">feeltens</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-sitemap">

    
    
      
    

    

    <a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>站点地图</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.feeltens.com/macos-skills/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="feeltens">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="feeltens">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">macOS skills

              
            
          </h2>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-23 21:58:47" itemprop="dateCreated datePublished" datetime="2019-07-23T21:58:47+08:00">2019-07-23</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-11-20 21:31:11" itemprop="dateModified" datetime="2020-11-20T21:31:11+08:00">2020-11-20</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/skill/" itemprop="url" rel="index"><span itemprop="name">skill</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="安装任何来源软件"><a href="#安装任何来源软件" class="headerlink" title="安装任何来源软件"></a>安装任何来源软件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo spctl --master-disable</span><br></pre></td></tr></table></figure>
<h2 id="修改文件夹权限"><a href="#修改文件夹权限" class="headerlink" title="修改文件夹权限"></a>修改文件夹权限</h2><p>创建带权限的文件目录<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -pm 775 /opt/fastdfs</span><br></pre></td></tr></table></figure></p>
<p>修改文件目录的持有者（推荐使用）<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R $USER /opt/fastdfs</span><br></pre></td></tr></table></figure></p>
<p>修改已存在的文件目录权限<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod -R 777 /opt/fastdfs</span><br></pre></td></tr></table></figure></p>
<h2 id="调整菜单栏图标位置"><a href="#调整菜单栏图标位置" class="headerlink" title="调整菜单栏图标位置"></a>调整菜单栏图标位置</h2><p>按住 <code>Command</code>，手动拖拽系统图标</p>
<a id="more"></a>
<h2 id="隐藏-Transcend-JetDrive-Lite"><a href="#隐藏-Transcend-JetDrive-Lite" class="headerlink" title="隐藏 Transcend JetDrive Lite"></a>隐藏 Transcend JetDrive Lite</h2><ol>
<li>为你的 Transcend 制作替身，也就是快捷方式</li>
<li>将该替身重命名为 <code>SD</code>，然后保存到非 Transcend 磁盘的其他地方</li>
<li>将快捷方式拖入 Finder 左侧个人收藏边栏</li>
<li>使用 File Locker 将 /Volumes/SD 隐藏。</li>
</ol>
<h2 id="切换中英文输入法"><a href="#切换中英文输入法" class="headerlink" title="切换中英文输入法"></a>切换中英文输入法</h2><p>System Perences → Keyboard → Shortcuts → Input Sources → 勾选 Select the previous input source</p>
<h2 id="修改配置文件，提前备份"><a href="#修改配置文件，提前备份" class="headerlink" title="修改配置文件，提前备份"></a>修改配置文件，提前备份</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp oldFile newFile</span><br></pre></td></tr></table></figure>
<h2 id="macOS-查看哪些端口被占用"><a href="#macOS-查看哪些端口被占用" class="headerlink" title="macOS 查看哪些端口被占用"></a>macOS 查看哪些端口被占用</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo lsof -i :9000</span><br><span class="line">sudo kill -9 364</span><br></pre></td></tr></table></figure>
<p><code>lsof</code> 代表 <code>list open file</code>。<br><code>-i</code> 代表网络连接。<br><code>:9000</code> 指明端口号。</p>
<h2 id="macOS-优酷客户端下载的视频位置"><a href="#macOS-优酷客户端下载的视频位置" class="headerlink" title="macOS 优酷客户端下载的视频位置"></a>macOS 优酷客户端下载的视频位置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Library/Containers/com.youku.mac/Data/</span><br></pre></td></tr></table></figure>
<h2 id="macOS-语言设置"><a href="#macOS-语言设置" class="headerlink" title="macOS 语言设置"></a>macOS 语言设置</h2><ul>
<li>macOS 全局语言设置</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System Preferences → Language &amp; Region → Preferred languages</span><br></pre></td></tr></table></figure>
<ul>
<li>macOS 系统初始化 Recovery 语言</li>
</ul>
<p>打开终端 Terminal 输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo languagesetup</span><br></pre></td></tr></table></figure>
<p>然后输入 1) 是英文，重启电脑</p>
<p>13) 是简体中文</p>
<ul>
<li>App-Language</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">App-Language-Chooser</span><br><span class="line">Language-Switcher</span><br><span class="line">LanguagesService</span><br><span class="line">LinguaSwitch</span><br></pre></td></tr></table></figure>
<ul>
<li>修改单个 Mac 应用程序的默认语言</li>
</ul>
<p>在使用英文作为 Mac 默认语言的时候，需要让 Microsoft Word 以简体中文运行。</p>
<ol>
<li><p>找到 App 的 Bundle Identifier<br> Bundle Identifier 是 App 的标识。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mdls -name kMDItemCFBundleIdentifier /Applications/Microsoft\ Word.app</span><br></pre></td></tr></table></figure>
<p>注意：在命令行中，如果文件名或者目录名中包含空格，是需要用『\』来转义的。</p>
<p>命令运行之后，会返回以下的结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kMDItemCFBundleIdentifier = "com.microsoft.Word"</span><br></pre></td></tr></table></figure>
<p>其中，com.microsoft.word 就是 Microsoft Word 的 Bundle Identifier 。</p>
<p>kMDItemCFBundleIdentifier = “com.microsoft.Word”</p>
</li>
<li><p>修改 Microsoft Word 的默认语言为简体中文</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.microsoft.Word AppleLanguages '("zh-Hans")'</span><br></pre></td></tr></table></figure>
<p>修改完之后，是永久生效的。可以用相同的方法，修改回原来的语言。</p>
<p>如果只需要让某个 App 以某种语言临时运行一次，不希望修改它的默认运行语言，可以输入命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Applications/iCal.app/Contents/MacOS/iCal -AppleLanguages '(de)'</span><br></pre></td></tr></table></figure>
<p>或使用 Alfred Workflows</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Open App in English</span><br><span class="line">Open App in Chinese</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>VOX 播放器语言设置成中文</li>
</ul>
<p>用 Finder 打开应用程序文件夹, 找到 VOX, 右键显示文件包内容,  </p>
<p>依次打开 Contents-Resources, 找到最后一个 zh-Hant.lproj 文件夹,  </p>
<p>将里面的所有文件都复制覆盖到 en.lproj 文件夹, 然后再打开 VOX。</p>
<h2 id="macOS-清空字体缓存"><a href="#macOS-清空字体缓存" class="headerlink" title="macOS 清空字体缓存"></a>macOS 清空字体缓存</h2><p>只适用于 OSX 10.5 及以上版本。<br>首先退出字体册，然后退出所有可能在使用字体的应用程序（如 Word，Pages 等）；</p>
<p>然后在『Terminal』中输入下面的命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo atsutil databases -remove</span><br><span class="line">atsutil databases -removeUser</span><br><span class="line">atsutil server -shutdown</span><br><span class="line">atsutil server -ping</span><br></pre></td></tr></table></figure>
<h2 id="提取-Mac-应用程序图标"><a href="#提取-Mac-应用程序图标" class="headerlink" title="提取 Mac 应用程序图标"></a>提取 Mac 应用程序图标</h2><p>方法一：使用预览工具 Preview 快速提取 App 图标<br>方法二：直接提取 App 图标的 icns 文件。在 App 右键 → Show Package Contents → Content → Resources</p>
<h2 id="macOS-原生截图"><a href="#macOS-原生截图" class="headerlink" title="macOS 原生截图"></a>macOS 原生截图</h2><ul>
<li><p>对整个屏幕截图 → 按 Command (⌘) + Shift + 3</p>
</li>
<li><p>对某个窗口截图</p>
<p>按 Command + Shift + 4。指针会变为十字准线。<br>接着按空格键。指针会变为相机指针。<br>将相机指针移至某个窗口以使其高亮显示。<br>点按鼠标或触控板。要取消，请按 Escape (esc) 键，然后点按。</p>
</li>
<li><p>修改截图的默认保存路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">com.apple.screencapture location ~/Desktop/ScreenShots</span><br><span class="line">killall SystemUIServer</span><br></pre></td></tr></table></figure>
</li>
<li><p>去掉或恢复截图的阴影</p>
<p>去掉截图的阴影</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.screencapture disable-shadow -bool true</span><br><span class="line">killall SystemUIServer</span><br></pre></td></tr></table></figure>
<p>恢复截图的阴影</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.screencapture disable-shadow -bool false</span><br><span class="line">killall SystemUIServer</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="如何让-Finder-出现退出选项"><a href="#如何让-Finder-出现退出选项" class="headerlink" title="如何让 Finder 出现退出选项"></a>如何让 Finder 出现退出选项</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.Finder QuitMenuItem 1</span><br></pre></td></tr></table></figure>
<p>重启 Finder 之后才能生效<br>恢复原来的样子</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.Finder QuitMenuItem 0</span><br></pre></td></tr></table></figure>
<h2 id="修改-hosts"><a href="#修改-hosts" class="headerlink" title="修改 hosts"></a>修改 hosts</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod 755 /etc/hosts</span><br><span class="line">sudo vi /etc/hosts</span><br></pre></td></tr></table></figure>
<p>建议使用 SwitchHosts</p>
<h2 id="macOS-开机音效"><a href="#macOS-开机音效" class="headerlink" title="macOS 开机音效"></a>macOS 开机音效</h2><p>取消开机音效<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nvram SystemAudioVolume=%80</span><br></pre></td></tr></table></figure></p>
<p>恢复开机音效<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nvram -d SystemAudioVolume</span><br></pre></td></tr></table></figure></p>
<h2 id="删除自带的输入法"><a href="#删除自带的输入法" class="headerlink" title="删除自带的输入法"></a>删除自带的输入法</h2><p>安装 PlistEdit Pro</p>
<p>在终端里输入命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo open ~/Library/Preferences/com.apple.HIToolbox.plist</span><br></pre></td></tr></table></figure>
<p>选中 「Root」→「AppleEnabledInputSources」</p>
<p>接着会跳出名为“0、1、2、3、4、5、6” 的文件夹，逐个翻阅各个文件夹。</p>
<p>待找到出现 KeyBoardLayout Name 为 <code>ABC</code> 关键字样的文件夹时，删除整个以数字命名的文件。保存，关闭。</p>
<p>重启电脑</p>
<h2 id="Finder-更改所有文件夹显示选项"><a href="#Finder-更改所有文件夹显示选项" class="headerlink" title="Finder 更改所有文件夹显示选项"></a>Finder 更改所有文件夹显示选项</h2><ul>
<li><p>打开 Finder，连续点击 Command + ↑ 数次，直到界面不再跳转即可查看到磁盘的图标；</p>
</li>
<li><p>选择显示类型</p>
</li>
<li><p>Command + J</p>
</li>
<li><p>设置显示效果</p>
<p>Always open in list view<br>Browse in list view<br>Text size: 14<br>Use as Defaults</p>
</li>
<li><p>打开 Terminal，输入命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo find / -name .DS_Store -exec rm &#123;&#125; +</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启 Finder</p>
</li>
</ul>
<h2 id="macOS-定时关机、重启、睡眠"><a href="#macOS-定时关机、重启、睡眠" class="headerlink" title="macOS 定时关机、重启、睡眠"></a>macOS 定时关机、重启、睡眠</h2><h3 id="定期设定"><a href="#定期设定" class="headerlink" title="定期设定"></a>定期设定</h3><p>System Preferences → Energy Saver → Schedule… → Shut Down  Every Day  at 22:00</p>
<h3 id="临时设定"><a href="#临时设定" class="headerlink" title="临时设定"></a>临时设定</h3><ul>
<li>通过终端命令配置单次任务</li>
</ul>
<p>设定 2012 年 11 月 7 日 23:15 关机</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo shutdown -h 1211072315</span><br></pre></td></tr></table></figure>
<p>设定 2012 年 11 月 7 日 23:15 重启</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo shutdown -r 1211072315</span><br></pre></td></tr></table></figure>
<p>设定 2012 年 11 月 7 日 23:15 睡眠</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo shutdown -s 1211072315</span><br></pre></td></tr></table></figure>
<p>命令的主体主要是 shutdown，h/r/s 分别代表关机 / 重启 / 睡眠，然后在后面加上执行时间 (yymmddhhmm) 即可。</p>
<ul>
<li>通过终端取消单次定时任务</li>
</ul>
<p>注意创建的 pid 623，这是指当前运行的这个 shutdown 命令的进程号，如果要取消关机，只需要停止这个进程的运行就可以了。命令为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kill 623</span><br></pre></td></tr></table></figure>
<h2 id="制作启动盘命令"><a href="#制作启动盘命令" class="headerlink" title="制作启动盘命令"></a>制作启动盘命令</h2><p>把 U 盘抹掉，名称设置为 ABC</p>
<p>Format: Mac OS Extended (Journaled)</p>
<p>GUID</p>
<p>以下命令在 Terminal 中手动输入 + Tab 提示。</p>
<p>macOS Mojave<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /Applications/Install\ macOS\ Mojave.app/Contents/Resources/createinstallmedia --volume /Volumes/ABC --applicationpath /Applications/Install\ macOS\ Mojave.app --nointeraction</span><br></pre></td></tr></table></figure></p>
<p>macOS Catalina Beta<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /Applications/Install\ macOS\ Catalina\ Beta.app/Contents/Resources/createinstallmedia --volume /Volumes/ABC</span><br></pre></td></tr></table></figure></p>
<h2 id="系统服务-amp-用户服务"><a href="#系统服务-amp-用户服务" class="headerlink" title="系统服务 &amp; 用户服务"></a>系统服务 &amp; 用户服务</h2><p>系统服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/System/Library/Services</span><br></pre></td></tr></table></figure>
<p>用户服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Library/Services</span><br></pre></td></tr></table></figure>
<h2 id="QuickLook「快速预览」-插件扩展"><a href="#QuickLook「快速预览」-插件扩展" class="headerlink" title="QuickLook「快速预览」 插件扩展"></a>QuickLook「快速预览」 插件扩展</h2><p>.qlgenerator</p>
<p>安装步骤：</p>
<p>将插件移动到 /Library/QuickLook 目录下</p>
<p>使用「终端」重启 QuickLook</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qlmanage -r</span><br></pre></td></tr></table></figure>
<p>插件列表：</p>
<ul>
<li>qlmarkdown 兼容 markdown</li>
<li>QLColorCode 高亮查看代码</li>
<li>QuickLookJSON 查看 JSON 文件</li>
<li>QLPrettyPatch 查看 Patch 文件</li>
<li>QLStephen 预览无拓展名的纯文本文件</li>
<li>QuickLookCSV 预览 CSV 文件</li>
<li>BetterZipQL 查看 Zip 压缩文件的信息以及文件目录</li>
<li>QLlmageSize 在预览窗口的标题栏中显示图片分辨率及文件大小</li>
<li>WebP 快速查看 WebP 格式图片</li>
</ul>
<h2 id="QuickLook（快速查看）直接选择和复制文字"><a href="#QuickLook（快速查看）直接选择和复制文字" class="headerlink" title="QuickLook（快速查看）直接选择和复制文字"></a>QuickLook（快速查看）直接选择和复制文字</h2><p>终端开启命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.finder QLEnableTextSelection -bool TRUE;killall Finder</span><br></pre></td></tr></table></figure>
<p>恢复命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults delete com.apple.finder QLEnableTextSelection;killall Finder</span><br></pre></td></tr></table></figure>
<p>禁止 mac 的隐藏开机启动项</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Library/LaunchAgents</span><br></pre></td></tr></table></figure>
<h2 id="Mac-登陆-去掉-其他用户"><a href="#Mac-登陆-去掉-其他用户" class="headerlink" title="Mac 登陆 去掉 其他用户"></a>Mac 登陆 去掉 其他用户</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo defaults write /Library/Preferences/com.apple.loginwindow SHOWOTHERUSERS_MANAGED -bool FALSE</span><br></pre></td></tr></table></figure>
<h2 id="Mac-解压压缩乱码问题解决"><a href="#Mac-解压压缩乱码问题解决" class="headerlink" title="Mac 解压压缩乱码问题解决"></a>Mac 解压压缩乱码问题解决</h2><p>Mac 的 zip 格式压缩，使用的字符编码是当前系统默认的 UTF-8；<br>Windows 系统中文版默认字符集是 GB2312。</p>
<p>在 macOS 系统中，推荐使用 The Archive Browser 解压，使用 BetterZip 压缩。</p>
<h2 id="显示-隐藏文件命令"><a href="#显示-隐藏文件命令" class="headerlink" title="显示/隐藏文件命令"></a>显示/隐藏文件命令</h2><p>显示隐藏文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.finder AppleShowAllFiles YES</span><br><span class="line"></span><br><span class="line">defaults write com.apple.finder AppleShowAllFiles -bool true</span><br></pre></td></tr></table></figure>
<p>隐藏隐藏文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.finder AppleShowAllFiles NO</span><br><span class="line"></span><br><span class="line">defaults write com.apple.finder AppleShowAllFiles -bool false</span><br></pre></td></tr></table></figure>
<h2 id="macOS-终端走代理"><a href="#macOS-终端走代理" class="headerlink" title="macOS 终端走代理"></a>macOS 终端走代理</h2><p>启用了 shadowsocks 且本地代理为 socks5://127.0.0.1:1080</p>
<p>设置代理</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export ALL_PROXY=socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure>
<p>清除代理</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset ALL_PROXY</span><br></pre></td></tr></table></figure>
<p>查看 ip 测试是否生效</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -i https://ip.cn</span><br></pre></td></tr></table></figure>
<p>为了方便使用，可以为上述长命名设置 alias</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.zshrc</span><br></pre></td></tr></table></figure>
<p>添加如下配置信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alias setproxy=&quot;export ALL_PROXY=socks5://127.0.0.1:1080&quot;</span><br><span class="line">alias unsetproxy=&quot;unset ALL_PROXY&quot;</span><br><span class="line">alias ip=&quot;curl -i http://ip.cn&quot;</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure>
<p>在使用终端走代理时，setproxy；</p>
<p>不使用终端走代理时，unsetprocy</p>
<h2 id="Mac-设置-Launchpad-的列数和行数"><a href="#Mac-设置-Launchpad-的列数和行数" class="headerlink" title="Mac 设置 Launchpad 的列数和行数"></a>Mac 设置 Launchpad 的列数和行数</h2><p>设置 Launchpad 的列数，对应于每一行 App 的个数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dock springboard-columns -int 列数</span><br></pre></td></tr></table></figure>
<p>设置 Launchpad 的行数，对应于每一列 App 的个数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dock springboard-rows -int 行数</span><br></pre></td></tr></table></figure>
<p>重置 Launchpad</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dock ResetLaunchPad -bool TRUE</span><br></pre></td></tr></table></figure>
<p>重置 Dock</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall Dock</span><br></pre></td></tr></table></figure>
<h2 id="Mac-一次性打开多个特定网页"><a href="#Mac-一次性打开多个特定网页" class="headerlink" title="Mac 一次性打开多个特定网页"></a>Mac 一次性打开多个特定网页</h2><p>打开 Automator → Application → Library → Internet → Get Specified URLs → 添加特定网页地址 → Display Webpages → Command + S → 保存为 Application</p>
<h2 id="Mac-系统预置-app-路径"><a href="#Mac-系统预置-app-路径" class="headerlink" title="Mac 系统预置 app 路径"></a>Mac 系统预置 app 路径</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/System/Library/CoreServices/</span><br></pre></td></tr></table></figure>
<p>比如 /System/Library/CoreServices/Finder.app</p>
<h2 id="Mac-输入法路径"><a href="#Mac-输入法路径" class="headerlink" title="Mac 输入法路径"></a>Mac 输入法路径</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Library/Input Methods/Qingg.app</span><br></pre></td></tr></table></figure>
<h2 id="Mac-终端切换到-root-用户"><a href="#Mac-终端切换到-root-用户" class="headerlink" title="Mac 终端切换到 root 用户"></a>Mac 终端切换到 root 用户</h2><p>终端命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br></pre></td></tr></table></figure>
<p>输入 root 用户密码</p>
<h2 id="Mac-Ubuntu-Linux-配置-sudo-免密码"><a href="#Mac-Ubuntu-Linux-配置-sudo-免密码" class="headerlink" title="Mac / Ubuntu / Linux 配置 sudo 免密码"></a>Mac / Ubuntu / Linux 配置 sudo 免密码</h2><p>终端命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br></pre></td></tr></table></figure></p>
<p>输入 root 用户密码</p>
<p>修改文件权限，可读写<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u+w /etc/sudoers</span><br></pre></td></tr></table></figure></p>
<p>配置修改账户免密</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/sudoers</span><br></pre></td></tr></table></figure>
<p>输入命令 <code>/wheel</code> 找到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># root and users in group wheel can run anything on any machine as any user</span><br><span class="line">root        ALL = (ALL) ALL</span><br><span class="line">%admin      ALL = (ALL) ALL</span><br></pre></td></tr></table></figure>
<p>修改为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># root and users in group wheel can run anything on any machine as any user</span><br><span class="line">#root       ALL = (ALL) ALL</span><br><span class="line">#%admin     ALL = (ALL) ALL</span><br><span class="line">root            ALL = (ALL) NOPASSWD: NOPASSWD: ALL</span><br><span class="line">%admin          ALL = (ALL) NOPASSWD: NOPASSWD: ALL</span><br></pre></td></tr></table></figure>
<h2 id="禁止-DS-store-生成"><a href="#禁止-DS-store-生成" class="headerlink" title="禁止 .DS_store 生成"></a>禁止 .DS_store 生成</h2><p>禁止 .DS_store 生成，打开“终端”，复制黏贴下面的命令，回车执行，重启 Mac 即可生效。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool TRUE</span><br></pre></td></tr></table></figure></p>
<p>恢复 .DS_store 生成<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults delete com.apple.desktopservices DSDontWriteNetworkStores</span><br></pre></td></tr></table></figure></p>
<p>刪除已存在的.DS_Store<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo find . -name ".DS_Store" -depth -exec rm &#123;&#125; \;</span><br></pre></td></tr></table></figure></p>
<h2 id="macOS-Command-Q-防止-App-误按退出"><a href="#macOS-Command-Q-防止-App-误按退出" class="headerlink" title="macOS Command + Q 防止 App 误按退出"></a>macOS Command + Q 防止 App 误按退出</h2><ul>
<li><p>SlowQuitApps 延缓关闭操作</p>
</li>
<li><p>CommandQ</p>
</li>
<li><p>QBlocker</p>
</li>
<li><p>Karabiner</p>
<p>  Press Command+Q twice to Quit Application</p>
<p>  <a href="https://pqrs.org/osx/karabiner/complex_modifications/" target="_blank" rel="noopener">https://pqrs.org/osx/karabiner/complex_modifications/</a></p>
<p>  搜索 command+q</p>
</li>
<li><p>Hammerspoon</p>
<p>  安装 double_cmdq_to_quit.lua</p>
</li>
</ul>
<h2 id="分区格式-APFS-降级为-HFS"><a href="#分区格式-APFS-降级为-HFS" class="headerlink" title="分区格式 APFS 降级为 HFS+"></a>分区格式 APFS 降级为 HFS+</h2><ol>
<li>使用 U 盘启动，在终端中执行命令 <code>diskutil zeroDisk</code>，将分区表抹掉；</li>
<li>再从 U 盘重启进去再重新格式化，然后安装旧系统</li>
</ol>
<h2 id="清歌输入法-备份"><a href="#清歌输入法-备份" class="headerlink" title="清歌输入法 备份"></a>清歌输入法 备份</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Library/Application Support/Qingg</span><br></pre></td></tr></table></figure>
<h2 id="zsh-运行命令慢"><a href="#zsh-运行命令慢" class="headerlink" title="zsh 运行命令慢"></a>zsh 运行命令慢</h2><p>日志文件路径<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/private/var/log/asl/*.asl</span><br></pre></td></tr></table></figure></p>
<p>清理日志文件<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo du -sh /private/var/log/asl/</span><br></pre></td></tr></table></figure></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /private/var/log/asl/*.asl</span><br></pre></td></tr></table></figure>
<h2 id="Mac-一键退出所有-App"><a href="#Mac-一键退出所有-App" class="headerlink" title="Mac 一键退出所有 App"></a>Mac 一键退出所有 App</h2><ul>
<li>打开 Automator，创建 Application</li>
<li>点击左侧 Library → Utilities，搜索 quit，选择 Quit All Applications</li>
<li>在右侧添加不需要退出的 App，即白名单</li>
<li>Command + S，保存在 /Applications，命名为「Quit All Apps」</li>
</ul>
<p>无需退出的 App 白名单</p>
<ul>
<li>Application<ul>
<li>Alfred</li>
<li>AppPolice</li>
<li>aText</li>
<li>Command-Tab Plus</li>
<li>Default Folder X</li>
<li>Flux</li>
<li>ForkLift</li>
<li>GhostSKB</li>
<li>Hammerspoon</li>
<li>iTerm</li>
<li>Karabiner-Elements</li>
<li>PopClip</li>
<li>ShadowsocksX-NG</li>
<li>SizeUp</li>
<li>Smooze</li>
<li>Snap</li>
<li>Snipaste</li>
<li>stretchly</li>
<li>TotalFinder</li>
<li>XtraFinder</li>
</ul>
</li>
<li>Setapp<ul>
<li>Bartender</li>
<li>BetterTouchTool</li>
<li>Boom 3D</li>
<li>Paste</li>
<li>ToothFairy</li>
</ul>
</li>
<li>Utilities<ul>
<li>NoSleep</li>
</ul>
</li>
</ul>
<h2 id="软链接快速访问目录"><a href="#软链接快速访问目录" class="headerlink" title="软链接快速访问目录"></a>软链接快速访问目录</h2><p>做一个软链接指向某个目录：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/run</span><br><span class="line">ln -s apache-tomcat-8.5.23 tomcat</span><br></pre></td></tr></table></figure></p>
<p>这样就能轻易用  <code>~/run/tomcat</code> 去访问 apache-tomcat-8.5.23 了。</p>
<h2 id="重置-SMC"><a href="#重置-SMC" class="headerlink" title="重置 SMC"></a>重置 SMC</h2><p>先关机，然后断开电源，拔掉所有 USB 的连接，然后同时按住键盘左下角的 Shift，Control，Option 和开机键 15 秒。全过程 Mac 不会开机。15 秒后松手插上电源开机。<br>如何重置 Mac 上的系统管理控制器 (SMC)<br><a href="https://support.apple.com/zh-cn/HT201295" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT201295</a></p>
<h2 id="重置-NVRAM"><a href="#重置-NVRAM" class="headerlink" title="重置 NVRAM"></a>重置 NVRAM</h2><p>将 Mac 关机，然后开机并立即同时按住以下四个按键：Option、Command、P 和 R。您可以在大约 20 秒后松开这些按键，在此期间您的 Mac 可能看似在重新启动。<br>重置 Mac 上的 NVRAM 或 PRAM<br><a href="https://support.apple.com/zh-cn/HT204063" target="_blank" rel="noopener">https://support.apple.com/zh-cn/HT204063</a></p>
<h2 id="macOS-启动项"><a href="#macOS-启动项" class="headerlink" title="macOS 启动项"></a>macOS 启动项</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/System/Library/StartupItems</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/admin/Library/LaunchAgents</span><br></pre></td></tr></table></figure>
<h2 id="Dock-不活动的图标进入半透明状态"><a href="#Dock-不活动的图标进入半透明状态" class="headerlink" title="Dock 不活动的图标进入半透明状态"></a>Dock 不活动的图标进入半透明状态</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.dock showhidden -bool TRUE; killall Dock</span><br></pre></td></tr></table></figure>
<h2 id="Terminal-iTerm2-Session-Ended-进程已完成"><a href="#Terminal-iTerm2-Session-Ended-进程已完成" class="headerlink" title="Terminal / iTerm2 Session Ended 进程已完成"></a>Terminal / iTerm2 Session Ended 进程已完成</h2><h3 id="Terminal"><a href="#Terminal" class="headerlink" title="Terminal"></a>Terminal</h3><p>进入系统 <code>Terminal</code> 的偏好设置，在<code>通用</code>标签栏中，勾选<code>命令（完整的路径）</code>（默认是勾选的默认登录shell），即<code>终端</code>-&gt;<code>偏好设置</code>-&gt;<code>通用</code>-&gt;<code>shell 的打开方式</code>，选择命令（完整路径)，填写 <code>/bin/bash</code> 或 <code>/bin/zsh</code><br>然后重启 Terminal。</p>
<p>切换 shell 为 zsh<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure></p>
<h3 id="iTerm"><a href="#iTerm" class="headerlink" title="iTerm"></a>iTerm</h3><p>在 iTerm Preferences，Profiles -&gt; General -&gt; Command，选择 Command 设置 <code>/bin/zsh</code> 或者 <code>/bin/bash</code>。</p>
<h2 id="sudo-usr-bin-sudo-must-be-owned-by-uid-0-and-have-the-setuid-bit-set"><a href="#sudo-usr-bin-sudo-must-be-owned-by-uid-0-and-have-the-setuid-bit-set" class="headerlink" title="sudo: /usr/bin/sudo must be owned by uid 0 and have the setuid bit set"></a>sudo: /usr/bin/sudo must be owned by uid 0 and have the setuid bit set</h2><p>Log out as the current user, then log back in as root.<br>Execute<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown root:sys /usr/bin/sudo &amp;&amp; chmod 4755 /usr/bin/sudo</span><br></pre></td></tr></table></figure></p>
<p>Log out as root, then log back in as the current user.</p>
<h2 id="Mac-终端提示-login：Could-not-determine-audit-condition-Process-completed"><a href="#Mac-终端提示-login：Could-not-determine-audit-condition-Process-completed" class="headerlink" title="Mac 终端提示 login：Could not determine audit condition [Process completed]"></a>Mac 终端提示 login：Could not determine audit condition [Process completed]</h2><p>解决方案：<br>打开 Finder 前往文件夹 <code>/usr/bin/</code> 文件夹，删除 login 文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/bin/</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf login</span><br></pre></td></tr></table></figure>
<h2 id="App-Store-无法更新的问题"><a href="#App-Store-无法更新的问题" class="headerlink" title="App Store 无法更新的问题"></a>App Store 无法更新的问题</h2><p>可以修改 dns 为 1.1.1.1 加翻墙解决</p>
<h2 id="Mac-防止误触电源键，而关闭显示器"><a href="#Mac-防止误触电源键，而关闭显示器" class="headerlink" title="Mac 防止误触电源键，而关闭显示器"></a>Mac 防止误触电源键，而关闭显示器</h2><p>在终端输入命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.loginwindow PowerButtonSleepsSystem -bool no</span><br></pre></td></tr></table></figure></p>
<p>现在如果点按电源按钮是没有任何反应的，只有长按才会出现。</p>
<p>如果想恢复原来的设置 no 改成 yes 就可以了。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.loginwindow PowerButtonSleepsSystem -bool yes</span><br></pre></td></tr></table></figure></p>
<h2 id="Mac-重置网络配置"><a href="#Mac-重置网络配置" class="headerlink" title="Mac 重置网络配置"></a>Mac 重置网络配置</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /Library/Preferences/SystemConfiguration/</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv preferences.plist preferences.plist.bak</span><br></pre></td></tr></table></figure>
<p>然后重启。</p>
<p>此方法是备份原来的配置项，系统检测不到原来的配置项，就会自动新建。</p>
<h2 id="查看-macOS-应用是不是-64-位"><a href="#查看-macOS-应用是不是-64-位" class="headerlink" title="查看 macOS 应用是不是 64 位"></a>查看 macOS 应用是不是 64 位</h2><p>按住 Option 键，点击左上角的 苹果图标，选择 System Information…<br>依次点击 Software → Applications；<br>查看 64-Bit</p>
<h2 id="Alfred-快捷切换-MacBook-外接显示器横竖屏"><a href="#Alfred-快捷切换-MacBook-外接显示器横竖屏" class="headerlink" title="Alfred 快捷切换 MacBook 外接显示器横竖屏"></a>Alfred 快捷切换 MacBook 外接显示器横竖屏</h2><p><a href="https://www.jianshu.com/p/16120eb43728" target="_blank" rel="noopener">https://www.jianshu.com/p/16120eb43728</a></p>
<h2 id="苹果电脑没声音"><a href="#苹果电脑没声音" class="headerlink" title="苹果电脑没声音"></a>苹果电脑没声音</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo killall coreaudiod</span><br></pre></td></tr></table></figure>

      
    </div>

    
      


    

    
    
    

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束-------------</div>
    
</div>
      
    </div>

    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/macOS/" rel="tag"># macOS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/linux-macos-change-file-permission/" rel="next" title="Linux /  macOS 修改文件目录权限">
                <i class="fa fa-chevron-left"></i> Linux /  macOS 修改文件目录权限
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/git-ignore-filemode/" rel="prev" title="Git 忽略文件目录权限或文件拥有者的改变">
                Git 忽略文件目录权限或文件拥有者的改变 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="gitalk-container">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="feeltens">
            
              <p class="site-author-name" itemprop="name">feeltens</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/feeltens" title="GitHub &rarr; https://github.com/feeltens" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:feeltens@gmail.com" title="E-Mail &rarr; mailto:feeltens@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装任何来源软件"><span class="nav-number">1.</span> <span class="nav-text">安装任何来源软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改文件夹权限"><span class="nav-number">2.</span> <span class="nav-text">修改文件夹权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#调整菜单栏图标位置"><span class="nav-number">3.</span> <span class="nav-text">调整菜单栏图标位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#隐藏-Transcend-JetDrive-Lite"><span class="nav-number">4.</span> <span class="nav-text">隐藏 Transcend JetDrive Lite</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#切换中英文输入法"><span class="nav-number">5.</span> <span class="nav-text">切换中英文输入法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改配置文件，提前备份"><span class="nav-number">6.</span> <span class="nav-text">修改配置文件，提前备份</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-查看哪些端口被占用"><span class="nav-number">7.</span> <span class="nav-text">macOS 查看哪些端口被占用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-优酷客户端下载的视频位置"><span class="nav-number">8.</span> <span class="nav-text">macOS 优酷客户端下载的视频位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-语言设置"><span class="nav-number">9.</span> <span class="nav-text">macOS 语言设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-清空字体缓存"><span class="nav-number">10.</span> <span class="nav-text">macOS 清空字体缓存</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#提取-Mac-应用程序图标"><span class="nav-number">11.</span> <span class="nav-text">提取 Mac 应用程序图标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-原生截图"><span class="nav-number">12.</span> <span class="nav-text">macOS 原生截图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何让-Finder-出现退出选项"><span class="nav-number">13.</span> <span class="nav-text">如何让 Finder 出现退出选项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改-hosts"><span class="nav-number">14.</span> <span class="nav-text">修改 hosts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-开机音效"><span class="nav-number">15.</span> <span class="nav-text">macOS 开机音效</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除自带的输入法"><span class="nav-number">16.</span> <span class="nav-text">删除自带的输入法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Finder-更改所有文件夹显示选项"><span class="nav-number">17.</span> <span class="nav-text">Finder 更改所有文件夹显示选项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-定时关机、重启、睡眠"><span class="nav-number">18.</span> <span class="nav-text">macOS 定时关机、重启、睡眠</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#定期设定"><span class="nav-number">18.1.</span> <span class="nav-text">定期设定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#临时设定"><span class="nav-number">18.2.</span> <span class="nav-text">临时设定</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#制作启动盘命令"><span class="nav-number">19.</span> <span class="nav-text">制作启动盘命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#系统服务-amp-用户服务"><span class="nav-number">20.</span> <span class="nav-text">系统服务 &amp; 用户服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#QuickLook「快速预览」-插件扩展"><span class="nav-number">21.</span> <span class="nav-text">QuickLook「快速预览」 插件扩展</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#QuickLook（快速查看）直接选择和复制文字"><span class="nav-number">22.</span> <span class="nav-text">QuickLook（快速查看）直接选择和复制文字</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-登陆-去掉-其他用户"><span class="nav-number">23.</span> <span class="nav-text">Mac 登陆 去掉 其他用户</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-解压压缩乱码问题解决"><span class="nav-number">24.</span> <span class="nav-text">Mac 解压压缩乱码问题解决</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#显示-隐藏文件命令"><span class="nav-number">25.</span> <span class="nav-text">显示/隐藏文件命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-终端走代理"><span class="nav-number">26.</span> <span class="nav-text">macOS 终端走代理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-设置-Launchpad-的列数和行数"><span class="nav-number">27.</span> <span class="nav-text">Mac 设置 Launchpad 的列数和行数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-一次性打开多个特定网页"><span class="nav-number">28.</span> <span class="nav-text">Mac 一次性打开多个特定网页</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-系统预置-app-路径"><span class="nav-number">29.</span> <span class="nav-text">Mac 系统预置 app 路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-输入法路径"><span class="nav-number">30.</span> <span class="nav-text">Mac 输入法路径</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-终端切换到-root-用户"><span class="nav-number">31.</span> <span class="nav-text">Mac 终端切换到 root 用户</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-Ubuntu-Linux-配置-sudo-免密码"><span class="nav-number">32.</span> <span class="nav-text">Mac / Ubuntu / Linux 配置 sudo 免密码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#禁止-DS-store-生成"><span class="nav-number">33.</span> <span class="nav-text">禁止 .DS_store 生成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-Command-Q-防止-App-误按退出"><span class="nav-number">34.</span> <span class="nav-text">macOS Command + Q 防止 App 误按退出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分区格式-APFS-降级为-HFS"><span class="nav-number">35.</span> <span class="nav-text">分区格式 APFS 降级为 HFS+</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#清歌输入法-备份"><span class="nav-number">36.</span> <span class="nav-text">清歌输入法 备份</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zsh-运行命令慢"><span class="nav-number">37.</span> <span class="nav-text">zsh 运行命令慢</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-一键退出所有-App"><span class="nav-number">38.</span> <span class="nav-text">Mac 一键退出所有 App</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#软链接快速访问目录"><span class="nav-number">39.</span> <span class="nav-text">软链接快速访问目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重置-SMC"><span class="nav-number">40.</span> <span class="nav-text">重置 SMC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#重置-NVRAM"><span class="nav-number">41.</span> <span class="nav-text">重置 NVRAM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-启动项"><span class="nav-number">42.</span> <span class="nav-text">macOS 启动项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dock-不活动的图标进入半透明状态"><span class="nav-number">43.</span> <span class="nav-text">Dock 不活动的图标进入半透明状态</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Terminal-iTerm2-Session-Ended-进程已完成"><span class="nav-number">44.</span> <span class="nav-text">Terminal / iTerm2 Session Ended 进程已完成</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Terminal"><span class="nav-number">44.1.</span> <span class="nav-text">Terminal</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iTerm"><span class="nav-number">44.2.</span> <span class="nav-text">iTerm</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sudo-usr-bin-sudo-must-be-owned-by-uid-0-and-have-the-setuid-bit-set"><span class="nav-number">45.</span> <span class="nav-text">sudo: /usr/bin/sudo must be owned by uid 0 and have the setuid bit set</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-终端提示-login：Could-not-determine-audit-condition-Process-completed"><span class="nav-number">46.</span> <span class="nav-text">Mac 终端提示 login：Could not determine audit condition [Process completed]</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#App-Store-无法更新的问题"><span class="nav-number">47.</span> <span class="nav-text">App Store 无法更新的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-防止误触电源键，而关闭显示器"><span class="nav-number">48.</span> <span class="nav-text">Mac 防止误触电源键，而关闭显示器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mac-重置网络配置"><span class="nav-number">49.</span> <span class="nav-text">Mac 重置网络配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看-macOS-应用是不是-64-位"><span class="nav-number">50.</span> <span class="nav-text">查看 macOS 应用是不是 64 位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Alfred-快捷切换-MacBook-外接显示器横竖屏"><span class="nav-number">51.</span> <span class="nav-text">Alfred 快捷切换 MacBook 外接显示器横竖屏</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#苹果电脑没声音"><span class="nav-number">52.</span> <span class="nav-text">苹果电脑没声音</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">feeltens</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a></div>




        








        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.2.0"></script>



  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  


  <script src="/js/next-boot.js?v=7.2.0"></script>


  
  <script src="/js/js.cookie.js?v=7.2.0"></script>
  <script src="/js/scroll-cookie.js?v=7.2.0"></script>


  

  

  


  
    
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="/js/md5.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: 'b1ea7fce22d3683d8110',
          clientSecret: 'a4e04d34706709c25a54211e9947e72a8613681d',
          repo: 'hexo-gitalk',
          owner: 'feeltens',
          admin: ['feeltens'],
          id: md5(location.pathname),
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')
       </script>

  



  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="/js/md5.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: 'b1ea7fce22d3683d8110',
          clientSecret: 'a4e04d34706709c25a54211e9947e72a8613681d',
          repo: 'hexo-gitalk',
          owner: 'feeltens',
          admin: ['feeltens'],
          id: md5(location.pathname),
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')
       </script>


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script>pangu.spacingPage();</script>


  

  
<script>
  $('.highlight').not('.gist .highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      const selection = document.getSelection();
      const selected = selection.rangeCount > 0 ? selection.getRangeAt(0) : false;
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
      if (selected) {
        selection.removeAllRanges();
        selection.addRange(selected);
      }
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  


  <!-- 代码块复制功能 -->
  <script type="text/javascript" src="/js/src/clipboard.min.js"></script>
  <script type="text/javascript" src="/js/src/clipboard-use.js"></script>

  <!-- themes/[theme_name]/layout/_script/comments.swig -->
  
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="/js/md5.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: 'b1ea7fce22d3683d8110',
          clientSecret: 'a4e04d34706709c25a54211e9947e72a8613681d',
          repo: 'hexo-gitalk',
          owner: 'feeltens',
          admin: ['feeltens'],
          id: md5(location.pathname),
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')
       </script>


</body>
</html>
